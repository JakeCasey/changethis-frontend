{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/jakecasey/Documents/Projects/Bugs/skeleton-key-frontend/components/special/PinOverlay.js\";\nimport withContainers from \"../wrappers/withContainer\";\nimport { Global as globalState } from \"./Global\";\nimport React, { Component } from \"react\";\nimport { Subscribe } from \"unstated\";\nimport styled from \"styled-components\";\nimport shortid from \"shortid\";\nimport SickButton from \"../styles/SickButton\";\nvar PinOverlayDiv = styled.div.withConfig({\n  displayName: \"PinOverlay__PinOverlayDiv\",\n  componentId: \"sgig1q-0\"\n})([\"position:absolute;top:0px;left:0px;right:0px;bottom:0px;z-index:2;pointer-events:\", \";\"], function (props) {\n  return props.showPointerEvents ? \"auto\" : \"none\";\n});\n\nvar PinOverlay =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PinOverlay, _Component);\n\n  function PinOverlay() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PinOverlay);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PinOverlay)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      showPointerEvents: true,\n      pin: {\n        x: \"\",\n        y: \"\"\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onMouseMove\", function (e) {\n      var rect = e.target.getBoundingClientRect();\n      var x = e.clientX - rect.left; //x position within the element.\n\n      var y = e.clientY - rect.top; //y position within the element.\n      //get scroll position;\n\n      var scroll;\n      var iframeScrollPosition = document.getElementById(\"iframe\").contentWindow.document.getElementById(\"iframeScrollPosition\");\n\n      if (iframeScrollPosition) {\n        scroll = iframeScrollPosition.getAttribute(\"y\");\n      } else {\n        scroll = \"0\";\n      } // this.setState({ pin: { ...this.state.pin, x: e.screenX, y: e.screenY } });\n\n\n      _this.setState({\n        pin: _objectSpread({}, _this.state.pin, {\n          x: x,\n          y: y,\n          scrollPosition: {\n            y: scroll\n          }\n        })\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_handlePinClick\", function (Global) {\n      Global._placePin(_this.state.pin); // Global._placePin(this.state.pin);\n\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_removePointerEvents\", function () {\n      _this.setState({\n        showPointerEvents: false\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(PinOverlay, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        pin: {\n          belongsTo: this.props.id,\n          x: \"\",\n          y: \"\",\n          comment: \"\"\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var block = this.props.block;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(Subscribe, {\n        to: [globalState],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, function (globalState) {\n        return React.createElement(PinOverlayDiv, {\n          showPointerEvents: _this2.state.showPointerEvents,\n          onClick: function onClick() {\n            return _this2._handlePinClick(globalState);\n          },\n          onMouseMove: function onMouseMove(e) {\n            return _this2._onMouseMove(e);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, _this2.state.pin.x, \"\\\" \\\"\", _this2.state.pin.y);\n      }));\n    }\n  }]);\n\n  return PinOverlay;\n}(Component); // export default withContainers([globalState])(PinOverlay);\n\n\nexport default PinOverlay;","map":{"version":3,"sources":["/Users/jakecasey/Documents/Projects/Bugs/skeleton-key-frontend/components/special/PinOverlay.js"],"names":["withContainers","Global","globalState","React","Component","Subscribe","styled","shortid","SickButton","PinOverlayDiv","div","props","showPointerEvents","PinOverlay","pin","x","y","e","rect","target","getBoundingClientRect","clientX","left","clientY","top","scroll","iframeScrollPosition","document","getElementById","contentWindow","getAttribute","setState","state","scrollPosition","_placePin","belongsTo","id","comment","block","_handlePinClick","_onMouseMove"],"mappings":"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","sourcesContent":["import withContainers from \"../wrappers/withContainer\";\n\nimport { Global as globalState } from \"./Global\";\nimport React, { Component } from \"react\";\nimport { Subscribe } from \"unstated\";\n\nimport styled from \"styled-components\";\nimport shortid from \"shortid\";\n\nimport SickButton from \"../styles/SickButton\";\n\nconst PinOverlayDiv = styled.div`\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  z-index: 2;\n  pointer-events: ${props => (props.showPointerEvents ? \"auto\" : \"none\")};\n`;\n\nclass PinOverlay extends Component {\n  state = {\n    showPointerEvents: true,\n    pin: { x: \"\", y: \"\" }\n  };\n\n  componentDidMount() {\n    this.setState({\n      pin: {\n        belongsTo: this.props.id,\n        x: \"\",\n        y: \"\",\n        comment: \"\"\n      }\n    });\n  }\n\n  _onMouseMove = e => {\n    var rect = e.target.getBoundingClientRect();\n    var x = e.clientX - rect.left; //x position within the element.\n    var y = e.clientY - rect.top; //y position within the element.\n\n    //get scroll position;\n    var scroll;\n\n    var iframeScrollPosition = document\n      .getElementById(\"iframe\")\n      .contentWindow.document.getElementById(\"iframeScrollPosition\");\n\n    if (iframeScrollPosition) {\n      scroll = iframeScrollPosition.getAttribute(\"y\");\n    } else {\n      scroll = \"0\";\n    }\n\n    // this.setState({ pin: { ...this.state.pin, x: e.screenX, y: e.screenY } });\n    this.setState({\n      pin: { ...this.state.pin, x: x, y: y, scrollPosition: { y: scroll } }\n    });\n  };\n\n  _handlePinClick = Global => {\n    Global._placePin(this.state.pin);\n\n    // Global._placePin(this.state.pin);\n  };\n\n  _removePointerEvents = () => {\n    this.setState({ showPointerEvents: false });\n  };\n\n  render() {\n    var block = this.props.block;\n    return (\n      <div>\n        <Subscribe to={[globalState]}>\n          {globalState => (\n            <PinOverlayDiv\n              showPointerEvents={this.state.showPointerEvents}\n              onClick={() => this._handlePinClick(globalState)}\n              onMouseMove={e => this._onMouseMove(e)}\n            >\n              {this.state.pin.x}\" \"{this.state.pin.y}\n            </PinOverlayDiv>\n          )}\n        </Subscribe>\n      </div>\n    );\n  }\n}\n\n// export default withContainers([globalState])(PinOverlay);\nexport default PinOverlay;\n"]},"metadata":{},"sourceType":"module"}