{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/jakecasey/Documents/Projects/Bugs/skeleton-key-frontend/components/special/Reporting.js\";\nimport Error from \"../ErrorMessage\";\nimport React, { Component } from \"react\";\nimport gql from \"graphql-tag\";\nimport { withRouter } from \"next/router\";\nimport withContainers from \"../wrappers/withContainer\";\nimport { Global as globalState } from \"./Global\";\nimport SickButton from \"../styles/SickButton\";\nimport styled from \"styled-components\";\nimport DesignCanvas from \"./DesignCanvas\";\nimport Toolbar from \"./Toolbar.js\";\nimport { Url } from \"url\";\nimport { endpoint, prodEndPoint } from \"../../config\";\nvar backendUrl = process.env.NODE_ENV === \"development\" ? endpoint : prodEndPoint;\nvar WorkArea = styled.div.withConfig({\n  displayName: \"Reporting__WorkArea\",\n  componentId: \"sc-5smu6h-0\"\n})([\"display:flex;margin-bottom:30px;\"]);\nvar UrlBar = styled.div.withConfig({\n  displayName: \"Reporting__UrlBar\",\n  componentId: \"sc-5smu6h-1\"\n})([\"display:flex;\"]);\nvar URL = styled.input.withConfig({\n  displayName: \"Reporting__URL\",\n  componentId: \"sc-5smu6h-2\"\n})([\"width:100%;\"]);\nvar CanvasContainer = styled.div.withConfig({\n  displayName: \"Reporting__CanvasContainer\",\n  componentId: \"sc-5smu6h-3\"\n})([\"position:relative;width:100%;height:100%;min-height:1100px;min-width:1100px;overflow-y:hidden;\"]); // https://tobiasahlin.com/spinkit/\n\nvar LoadingContainer = styled.div.withConfig({\n  displayName: \"Reporting__LoadingContainer\",\n  componentId: \"sc-5smu6h-4\"\n})([\".sk-folding-cube{display:\", \";margin:20px auto;width:40px;height:40px;-webkit-transform:rotateZ(45deg);transform:rotateZ(45deg);}.sk-folding-cube .sk-cube{float:left;width:50%;height:50%;-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);}.sk-folding-cube .sk-cube:before{content:\\\"\\\";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#4299e1;-webkit-animation:sk-foldCubeAngle 2.4s infinite linear both;animation:sk-foldCubeAngle 2.4s infinite linear both;-webkit-transform-origin:100% 100%;-ms-transform-origin:100% 100%;transform-origin:100% 100%;}.sk-folding-cube .sk-cube2{-webkit-transform:scale(1.1) rotateZ(90deg);transform:scale(1.1) rotateZ(90deg);}.sk-folding-cube .sk-cube3{-webkit-transform:scale(1.1) rotateZ(180deg);transform:scale(1.1) rotateZ(180deg);}.sk-folding-cube .sk-cube4{-webkit-transform:scale(1.1) rotateZ(270deg);transform:scale(1.1) rotateZ(270deg);}.sk-folding-cube .sk-cube2:before{-webkit-animation-delay:0.3s;animation-delay:0.3s;}.sk-folding-cube .sk-cube3:before{-webkit-animation-delay:0.6s;animation-delay:0.6s;}.sk-folding-cube .sk-cube4:before{-webkit-animation-delay:0.9s;animation-delay:0.9s;}@-webkit-keyframes sk-foldCubeAngle{0%,10%{-webkit-transform:perspective(140px) rotateX(-180deg);transform:perspective(140px) rotateX(-180deg);opacity:0;}25%,75%{-webkit-transform:perspective(140px) rotateX(0deg);transform:perspective(140px) rotateX(0deg);opacity:1;}90%,100%{-webkit-transform:perspective(140px) rotateY(180deg);transform:perspective(140px) rotateY(180deg);opacity:0;}}@keyframes sk-foldCubeAngle{0%,10%{-webkit-transform:perspective(140px) rotateX(-180deg);transform:perspective(140px) rotateX(-180deg);opacity:0;}25%,75%{-webkit-transform:perspective(140px) rotateX(0deg);transform:perspective(140px) rotateX(0deg);opacity:1;}90%,100%{-webkit-transform:perspective(140px) rotateY(180deg);transform:perspective(140px) rotateY(180deg);opacity:0;}}\"], function (props) {\n  return props.loading ? \"block\" : \"none\";\n});\nvar LoadingOverlay = styled.div.withConfig({\n  displayName: \"Reporting__LoadingOverlay\",\n  componentId: \"sc-5smu6h-5\"\n})([\"display:\", \";position:absolute;top:0;bottom:0;right:0;left:0;\"], function (props) {\n  return props.loading ? \"block\" : \"none\";\n});\n\nvar Reporting =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Reporting, _Component);\n\n  function Reporting() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Reporting);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Reporting)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      url: \"\"\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchPage\", function () {\n      _this.props.globalState.setState({\n        pageLoading: true\n      });\n\n      _this.props.globalState.fetchPage(_this.state.url);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateUrl\", function (e) {\n      var url = e.target.value;\n\n      _this.setState({\n        url: url\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleKeyDown\", function (e) {\n      if (e.key === \"Enter\") {\n        _this.fetchPage();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"stopLoading\", function () {\n      _this.props.globalState.setState({\n        pageLoading: false\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Reporting, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var router = this.props.router;\n      var url = router.query.url;\n\n      if (url) {\n        console.log(url);\n        this.setState({\n          url: url\n        }, function () {\n          _this2.fetchPage();\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(UrlBar, {\n        className: \"mb-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(URL, {\n        className: \"bg-gray-100 px-8 mr-8 rounded\",\n        value: this.state.url,\n        onChange: function onChange(e) {\n          _this3.updateUrl(e);\n        },\n        onKeyDown: function onKeyDown(e) {\n          return _this3.handleKeyDown(e);\n        },\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \" text-green-700 mr-4 rounded \",\n        onClick: function onClick() {\n          _this3.fetchPage();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        className: \"icon-arrow-thick-right-circle w-10 h-10\",\n        viewBox: \"0 0 24 24\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(\"circle\", {\n        cx: \"12\",\n        cy: \"12\",\n        r: \"10\",\n        className: \"fill-current text-green-300\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }), React.createElement(\"path\", {\n        d: \"M12 14H7a1 1 0 01-1-1v-2a1 1 0 011-1h5V8a1 1 0 011.7-.7l4 4a1 1 0 010 1.4l-4 4A1 1 0 0112 16v-2z\",\n        className: \"text-green-500 fill-current\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      })))), React.createElement(WorkArea, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, React.createElement(CanvasContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, this.props.globalState && this.props.globalState.state.overIframe.map(function (OverIframe, i) {\n        var OverIframeComponent = OverIframe.component;\n        return React.createElement(OverIframeComponent, {\n          key: i,\n          id: OverIframe.belongsTo,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232\n          },\n          __self: this\n        });\n      }), \" \", this.props.globalState && this.props.globalState.state && React.createElement(React.Fragment, null, React.createElement(LoadingOverlay, {\n        loading: this.props.globalState.state.pageLoading,\n        className: \"bg-gray-100 opacity-75\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }), React.createElement(LoadingContainer, {\n        className: \"flex absolute w-full mt-64\",\n        loading: this.props.globalState.state.pageLoading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sk-folding-cube \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sk-cube1 sk-cube \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"sk-cube2 sk-cube \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"sk-cube4 sk-cube \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"sk-cube3 sk-cube \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }))), React.createElement(\"img\", {\n        style: {\n          width: \"1100px\"\n        },\n        onLoad: function onLoad() {\n          return _this3.stopLoading();\n        },\n        src: this.props.globalState.state.urlSelected,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }))), React.createElement(Toolbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      })));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(_ref) {\n      var query = _ref.query;\n      return {\n        query: query\n      };\n    }\n  }]);\n\n  return Reporting;\n}(Component);\n\nexport default withContainers([globalState])(withRouter(Reporting));","map":{"version":3,"sources":["/Users/jakecasey/Documents/Projects/Bugs/skeleton-key-frontend/components/special/Reporting.js"],"names":["Error","React","Component","gql","withRouter","withContainers","Global","globalState","SickButton","styled","DesignCanvas","Toolbar","Url","endpoint","prodEndPoint","backendUrl","process","env","NODE_ENV","WorkArea","div","UrlBar","URL","input","CanvasContainer","LoadingContainer","props","loading","LoadingOverlay","Reporting","url","setState","pageLoading","fetchPage","state","e","target","value","key","router","query","console","log","updateUrl","handleKeyDown","overIframe","map","OverIframe","i","OverIframeComponent","component","belongsTo","width","stopLoading","urlSelected"],"mappings":"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","sourcesContent":["import Error from \"../ErrorMessage\";\nimport React, { Component } from \"react\";\nimport gql from \"graphql-tag\";\nimport { withRouter } from \"next/router\";\n\nimport withContainers from \"../wrappers/withContainer\";\nimport { Global as globalState } from \"./Global\";\n\nimport SickButton from \"../styles/SickButton\";\nimport styled from \"styled-components\";\nimport DesignCanvas from \"./DesignCanvas\";\nimport Toolbar from \"./Toolbar.js\";\nimport { Url } from \"url\";\nimport { endpoint, prodEndPoint } from \"../../config\";\n\nconst backendUrl =\n  process.env.NODE_ENV === \"development\" ? endpoint : prodEndPoint;\n\nconst WorkArea = styled.div`\n  display: flex;\n  margin-bottom: 30px;\n`;\n\nconst UrlBar = styled.div`\n  display: flex;\n`;\n\nconst URL = styled.input`\n  width: 100%;\n`;\nconst CanvasContainer = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  min-height: 1100px;\n  min-width: 1100px;\n  overflow-y: hidden;\n`;\n\n// https://tobiasahlin.com/spinkit/\nconst LoadingContainer = styled.div`\n  .sk-folding-cube {\n    display: ${props => (props.loading ? \"block\" : \"none\")};\n    margin: 20px auto;\n    width: 40px;\n    height: 40px;\n    -webkit-transform: rotateZ(45deg);\n    transform: rotateZ(45deg);\n  }\n\n  .sk-folding-cube .sk-cube {\n    float: left;\n    width: 50%;\n    height: 50%;\n    -webkit-transform: scale(1.1);\n    -ms-transform: scale(1.1);\n    transform: scale(1.1);\n  }\n  .sk-folding-cube .sk-cube:before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: #4299e1;\n    -webkit-animation: sk-foldCubeAngle 2.4s infinite linear both;\n    animation: sk-foldCubeAngle 2.4s infinite linear both;\n    -webkit-transform-origin: 100% 100%;\n    -ms-transform-origin: 100% 100%;\n    transform-origin: 100% 100%;\n  }\n  .sk-folding-cube .sk-cube2 {\n    -webkit-transform: scale(1.1) rotateZ(90deg);\n    transform: scale(1.1) rotateZ(90deg);\n  }\n  .sk-folding-cube .sk-cube3 {\n    -webkit-transform: scale(1.1) rotateZ(180deg);\n    transform: scale(1.1) rotateZ(180deg);\n  }\n  .sk-folding-cube .sk-cube4 {\n    -webkit-transform: scale(1.1) rotateZ(270deg);\n    transform: scale(1.1) rotateZ(270deg);\n  }\n  .sk-folding-cube .sk-cube2:before {\n    -webkit-animation-delay: 0.3s;\n    animation-delay: 0.3s;\n  }\n  .sk-folding-cube .sk-cube3:before {\n    -webkit-animation-delay: 0.6s;\n    animation-delay: 0.6s;\n  }\n  .sk-folding-cube .sk-cube4:before {\n    -webkit-animation-delay: 0.9s;\n    animation-delay: 0.9s;\n  }\n  @-webkit-keyframes sk-foldCubeAngle {\n    0%,\n    10% {\n      -webkit-transform: perspective(140px) rotateX(-180deg);\n      transform: perspective(140px) rotateX(-180deg);\n      opacity: 0;\n    }\n    25%,\n    75% {\n      -webkit-transform: perspective(140px) rotateX(0deg);\n      transform: perspective(140px) rotateX(0deg);\n      opacity: 1;\n    }\n    90%,\n    100% {\n      -webkit-transform: perspective(140px) rotateY(180deg);\n      transform: perspective(140px) rotateY(180deg);\n      opacity: 0;\n    }\n  }\n\n  @keyframes sk-foldCubeAngle {\n    0%,\n    10% {\n      -webkit-transform: perspective(140px) rotateX(-180deg);\n      transform: perspective(140px) rotateX(-180deg);\n      opacity: 0;\n    }\n    25%,\n    75% {\n      -webkit-transform: perspective(140px) rotateX(0deg);\n      transform: perspective(140px) rotateX(0deg);\n      opacity: 1;\n    }\n    90%,\n    100% {\n      -webkit-transform: perspective(140px) rotateY(180deg);\n      transform: perspective(140px) rotateY(180deg);\n      opacity: 0;\n    }\n  }\n`;\n\nconst LoadingOverlay = styled.div`\n  display: ${props => (props.loading ? \"block\" : \"none\")};\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n`;\n\nclass Reporting extends Component {\n  static getInitialProps({ query }) {\n    return { query };\n  }\n\n  state = {\n    url: \"\"\n  };\n\n  componentDidMount() {\n    const { router } = this.props;\n    const url = router.query.url;\n    if (url) {\n      console.log(url);\n      this.setState({ url }, () => {\n        this.fetchPage();\n      });\n    }\n  }\n\n  fetchPage = () => {\n    this.props.globalState.setState({ pageLoading: true });\n    this.props.globalState.fetchPage(this.state.url);\n  };\n\n  updateUrl = e => {\n    var url = e.target.value;\n    this.setState({ url });\n  };\n\n  handleKeyDown = e => {\n    if (e.key === \"Enter\") {\n      this.fetchPage();\n    }\n  };\n\n  stopLoading = () => {\n    this.props.globalState.setState({ pageLoading: false });\n  };\n\n  render() {\n    return (\n      <div>\n        <UrlBar className=\"mb-8\">\n          <URL\n            className=\"bg-gray-100 px-8 mr-8 rounded\"\n            value={this.state.url}\n            onChange={e => {\n              this.updateUrl(e);\n            }}\n            onKeyDown={e => this.handleKeyDown(e)}\n            type=\"text\"\n          />\n          <button\n            className=\" text-green-700 mr-4 rounded \"\n            onClick={() => {\n              this.fetchPage();\n            }}\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"icon-arrow-thick-right-circle w-10 h-10\"\n              viewBox=\"0 0 24 24\"\n            >\n              <circle\n                cx=\"12\"\n                cy=\"12\"\n                r=\"10\"\n                className=\"fill-current text-green-300\"\n              ></circle>\n              <path\n                d=\"M12 14H7a1 1 0 01-1-1v-2a1 1 0 011-1h5V8a1 1 0 011.7-.7l4 4a1 1 0 010 1.4l-4 4A1 1 0 0112 16v-2z\"\n                className=\"text-green-500 fill-current\"\n              ></path>\n            </svg>\n          </button>\n        </UrlBar>\n        <WorkArea>\n          <CanvasContainer>\n            {this.props.globalState &&\n              this.props.globalState.state.overIframe.map((OverIframe, i) => {\n                var OverIframeComponent = OverIframe.component;\n                return (\n                  <OverIframeComponent key={i} id={OverIframe.belongsTo} />\n                );\n              })}{\" \"}\n            {this.props.globalState && this.props.globalState.state && (\n              <>\n                <LoadingOverlay\n                  loading={this.props.globalState.state.pageLoading}\n                  className=\"bg-gray-100 opacity-75\"\n                />\n                <LoadingContainer\n                  className=\"flex absolute w-full mt-64\"\n                  loading={this.props.globalState.state.pageLoading}\n                >\n                  <div className=\"sk-folding-cube \">\n                    <div className=\"sk-cube1 sk-cube \"></div>\n                    <div className=\"sk-cube2 sk-cube \"></div>\n                    <div className=\"sk-cube4 sk-cube \"></div>\n                    <div className=\"sk-cube3 sk-cube \"></div>\n                  </div>\n                </LoadingContainer>\n                <img\n                  style={{ width: \"1100px\" }}\n                  onLoad={() => this.stopLoading()}\n                  src={this.props.globalState.state.urlSelected}\n                />\n              </>\n            )}\n            {/* <DesignCanvas /> */}\n          </CanvasContainer>\n          <Toolbar />\n        </WorkArea>\n      </div>\n    );\n  }\n}\n\nexport default withContainers([globalState])(withRouter(Reporting));\n"]},"metadata":{},"sourceType":"module"}