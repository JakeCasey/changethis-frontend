{"version":3,"file":"static/webpack/static/development/pages/plans.js.e9098eb617c43211ced0.hot-update.js","sources":["webpack:///./components/Subscribe.js"],"sourcesContent":["import React from 'react'\nimport { Mutation } from 'react-apollo';\nimport StripeCheckout from 'react-stripe-checkout';\nimport { STRIPE_PUBLIC_KEY } from '../config';\nimport gql from 'graphql-tag';\n\nconst SUBSCRIBE_USER_MUTATION = gql`\n  mutation SUBSCRIBE_USER_MUTATION($token: String!, $planId: String!) {\n   subscribe(token: $token, planId: $planId) {\n     message\n   }\n  }\n`;\n\n\n\nexport default class Subscribe extends React.Component {\n\n    onToken = (token, subscribe) => {\n        console.log(token);\n        // fetch('/save-stripe-token', {\n        //     method: 'POST',\n        //     body: JSON.stringify(token),\n        // }).then(response => {\n        //     response.json().then(data => {\n        //         alert(`We are in business, ${data.email}`);\n        //     });\n        // });\n    }\n\n    render() {\n        let { plan } = this.props;\n        return (\n\n            <Mutation\n                mutation={SUBSCRIBE_USER_MUTATION}\n            // refetchQueries={[{ query: CURRENT_USER_QUERY }]}\n            >\n                {(subscribe, { loading, error }) => (\n                    <div>\n                        <h2>{plan.planId}</h2>\n                        <StripeCheckout\n                            name={plan.planId}\n                            description={plan.description}\n                            token={(token) => this.onToken(token, subscribe)}\n                            stripeKey={STRIPE_PUBLIC_KEY}\n                        />\n                    </div>\n                )}\n            </Mutation>\n\n        )\n\n    }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AASA;;;;;;;;;;;;;;;;;;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AACA;AAAA;AACA;AADA;AAEA;AAGA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;AAeA;;;;AArCA;AACA;;;;;A","sourceRoot":""}