{"version":3,"file":"static/webpack/static/development/pages/plans.js.8ebb8ba17063053af1d9.hot-update.js","sources":["webpack:///./components/Unsubscribe.js"],"sourcesContent":["import React from 'react';\nimport { Mutation } from 'react-apollo';\nimport StripeCheckout from 'react-stripe-checkout';\nimport { CURRENT_USER_QUERY } from './wrappers/User';\nimport { STRIPE_PUBLIC_KEY } from '../config';\nimport gql from 'graphql-tag';\nimport styled from 'styled-components';\nimport SickButton from './styles/SickButton';\n\nconst UNSUBSCRIBE_USER_MUTATION = gql`\n  mutation UNSUBSCRIBE_USER_MUTATION($planId: String!) {\n    unsubscribe(planId: $planId) {\n      id\n      subscriptionId\n      plansSubscribed\n    }\n  }\n`;\n\nexport default class Unsubscribe extends React.Component {\n  onClick = async (planId, unsubscribe) => {\n    const res = await unsubscribe({\n      variables: {\n        planId: planId,\n      },\n    });\n  };\n\n  render() {\n    let {\n      plan: { planId, description },\n    } = this.props;\n    return (\n      <Mutation\n        mutation={UNSUBSCRIBE_USER_MUTATION}\n        refetchQueries={[{ query: CURRENT_USER_QUERY }]}\n      >\n        {(unsubscribe, { loading, error }) => (\n          <div>\n            <h2>{planId}</h2>\n            <SickButton\n              disabled={loading}\n              onClick={() => this.onClick(planId, unsubscribe)}\n            >\n              Unsubscrib{loading ? 'ing' : 'e'}\n            </SickButton>\n          </div>\n        )}\n      </Mutation>\n    );\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AASA;;;;;;;;;;;;;;;;;;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AADA;AADA;AACA;AAFA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;AAOA;AAAA;AACA;AADA;AAAA;AAAA;AAIA;AAEA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;AAaA;;;;AA/BA;AACA;;;;;A","sourceRoot":""}