{"version":3,"file":"static/webpack/static/development/pages/reporting.js.fdfd4bef0631ba2ef2f6.hot-update.js","sources":["webpack:///./components/special/Reporting.js"],"sourcesContent":["import Error from \"../ErrorMessage\";\nimport React, { Component } from \"react\";\nimport gql from \"graphql-tag\";\nimport { withRouter } from \"next/router\";\n\nimport withContainers from \"../wrappers/withContainer\";\nimport { Global as globalState } from \"./Global\";\n\nimport SickButton from \"../styles/SickButton\";\nimport styled from \"styled-components\";\nimport DesignCanvas from \"./DesignCanvas\";\nimport Toolbar from \"./Toolbar.js\";\nimport { Url } from \"url\";\nimport { endpoint, prodEndPoint } from \"../../config\";\n\nconst backendUrl =\n  process.env.NODE_ENV === \"development\" ? endpoint : prodEndPoint;\n\nconst WorkArea = styled.div`\n  display: flex;\n  margin-bottom: 30px;\n`;\n\nconst UrlBar = styled.div`\n  display: flex;\n`;\n\nconst URL = styled.input`\n  width: 100%;\n`;\nconst CanvasContainer = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  min-height: 1100px;\n  min-width: 1100px;\n  overflow-y: hidden;\n`;\n\n// https://tobiasahlin.com/spinkit/\nconst LoadingContainer = styled.div`\n  .sk-folding-cube {\n    display: ${props => (props.loading ? \"block\" : \"none\")};\n    margin: 20px auto;\n    width: 40px;\n    height: 40px;\n    -webkit-transform: rotateZ(45deg);\n    transform: rotateZ(45deg);\n  }\n\n  .sk-folding-cube .sk-cube {\n    float: left;\n    width: 50%;\n    height: 50%;\n    -webkit-transform: scale(1.1);\n    -ms-transform: scale(1.1);\n    transform: scale(1.1);\n  }\n  .sk-folding-cube .sk-cube:before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: #4299e1;\n    -webkit-animation: sk-foldCubeAngle 2.4s infinite linear both;\n    animation: sk-foldCubeAngle 2.4s infinite linear both;\n    -webkit-transform-origin: 100% 100%;\n    -ms-transform-origin: 100% 100%;\n    transform-origin: 100% 100%;\n  }\n  .sk-folding-cube .sk-cube2 {\n    -webkit-transform: scale(1.1) rotateZ(90deg);\n    transform: scale(1.1) rotateZ(90deg);\n  }\n  .sk-folding-cube .sk-cube3 {\n    -webkit-transform: scale(1.1) rotateZ(180deg);\n    transform: scale(1.1) rotateZ(180deg);\n  }\n  .sk-folding-cube .sk-cube4 {\n    -webkit-transform: scale(1.1) rotateZ(270deg);\n    transform: scale(1.1) rotateZ(270deg);\n  }\n  .sk-folding-cube .sk-cube2:before {\n    -webkit-animation-delay: 0.3s;\n    animation-delay: 0.3s;\n  }\n  .sk-folding-cube .sk-cube3:before {\n    -webkit-animation-delay: 0.6s;\n    animation-delay: 0.6s;\n  }\n  .sk-folding-cube .sk-cube4:before {\n    -webkit-animation-delay: 0.9s;\n    animation-delay: 0.9s;\n  }\n  @-webkit-keyframes sk-foldCubeAngle {\n    0%,\n    10% {\n      -webkit-transform: perspective(140px) rotateX(-180deg);\n      transform: perspective(140px) rotateX(-180deg);\n      opacity: 0;\n    }\n    25%,\n    75% {\n      -webkit-transform: perspective(140px) rotateX(0deg);\n      transform: perspective(140px) rotateX(0deg);\n      opacity: 1;\n    }\n    90%,\n    100% {\n      -webkit-transform: perspective(140px) rotateY(180deg);\n      transform: perspective(140px) rotateY(180deg);\n      opacity: 0;\n    }\n  }\n\n  @keyframes sk-foldCubeAngle {\n    0%,\n    10% {\n      -webkit-transform: perspective(140px) rotateX(-180deg);\n      transform: perspective(140px) rotateX(-180deg);\n      opacity: 0;\n    }\n    25%,\n    75% {\n      -webkit-transform: perspective(140px) rotateX(0deg);\n      transform: perspective(140px) rotateX(0deg);\n      opacity: 1;\n    }\n    90%,\n    100% {\n      -webkit-transform: perspective(140px) rotateY(180deg);\n      transform: perspective(140px) rotateY(180deg);\n      opacity: 0;\n    }\n  }\n`;\n\nconst LoadingOverlay = styled.div`\n  display: ${props => (props.loading ? \"block\" : \"none\")};\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n`;\n\nclass Reporting extends Component {\n  static getInitialProps({ query }) {\n    return { query };\n  }\n\n  state = {\n    url: \"\"\n  };\n\n  componentDidMount() {\n    const { router } = this.props;\n    const url = router.query.url;\n    if (url) {\n      console.log(url);\n      this.setState({ url });\n      this.fetchPage();\n    }\n  }\n\n  fetchPage = () => {\n    this.props.test.setState({ pageLoading: true });\n    this.props.test.fetchPage(this.state.url);\n  };\n\n  updateUrl = e => {\n    var url = e.target.value;\n    this.setState({ url });\n  };\n\n  handleKeyDown = e => {\n    if (e.key === \"Enter\") {\n      this.fetchPage();\n    }\n  };\n\n  stopLoading = () => {\n    this.props.test.setState({ pageLoading: false });\n  };\n\n  render() {\n    return (\n      <div>\n        <UrlBar className=\"mb-8\">\n          <URL\n            className=\"bg-gray-100 px-8 mr-8 rounded\"\n            value={this.state.url}\n            onChange={e => {\n              this.updateUrl(e);\n            }}\n            onKeyDown={e => this.handleKeyDown(e)}\n            type=\"text\"\n          />\n          <button\n            className=\" text-green-700 mr-4 rounded \"\n            onClick={() => {\n              this.fetchPage();\n            }}\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"icon-arrow-thick-right-circle w-10 h-10\"\n              viewBox=\"0 0 24 24\"\n            >\n              <circle\n                cx=\"12\"\n                cy=\"12\"\n                r=\"10\"\n                className=\"fill-current text-green-300\"\n              ></circle>\n              <path\n                d=\"M12 14H7a1 1 0 01-1-1v-2a1 1 0 011-1h5V8a1 1 0 011.7-.7l4 4a1 1 0 010 1.4l-4 4A1 1 0 0112 16v-2z\"\n                className=\"text-green-500 fill-current\"\n              ></path>\n            </svg>\n          </button>\n        </UrlBar>\n        <WorkArea>\n          <CanvasContainer>\n            {this.props.test &&\n              this.props.test.state.overIframe.map((OverIframe, i) => {\n                var OverIframeComponent = OverIframe.component;\n                return (\n                  <OverIframeComponent key={i} id={OverIframe.belongsTo} />\n                );\n              })}{\" \"}\n            {this.props.test && this.props.test.state && (\n              <>\n                <LoadingOverlay\n                  loading={this.props.test.state.pageLoading}\n                  className=\"bg-gray-100 opacity-75\"\n                />\n                <LoadingContainer\n                  className=\"flex absolute w-full mt-64\"\n                  loading={this.props.test.state.pageLoading}\n                >\n                  <div className=\"sk-folding-cube \">\n                    <div className=\"sk-cube1 sk-cube \"></div>\n                    <div className=\"sk-cube2 sk-cube \"></div>\n                    <div className=\"sk-cube4 sk-cube \"></div>\n                    <div className=\"sk-cube3 sk-cube \"></div>\n                  </div>\n                </LoadingContainer>\n                <img\n                  style={{ width: \"1100px\" }}\n                  onLoad={() => this.stopLoading()}\n                  src={this.props.test.state.urlSelected}\n                />\n              </>\n            )}\n            {/* <DesignCanvas /> */}\n          </CanvasContainer>\n          <Toolbar />\n        </WorkArea>\n      </div>\n    );\n  }\n}\n\nexport default withContainers([globalState])(withRouter(Reporting));\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AACA;AASA;AAAA;AAAA;AAAA;AAEA;AAAA;AAiGA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAOA;;;;;;;;;;;;;;;;;;AAKA;AACA;AADA;AACA;AAaA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;;;;;AA7BA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;;;AAsBA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAIA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;AAlHA;AAAA;AACA;AAAA;AAAA;AACA;;;;AAHA;AACA;AAqHA;;;;A","sourceRoot":""}